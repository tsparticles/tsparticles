{"ast":null,"code":"var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Image\", {\n  enumerable: true,\n  get: function get() {\n    return _Image.default;\n  }\n});\nObject.defineProperty(exports, \"ImageData\", {\n  enumerable: true,\n  get: function get() {\n    return _ImageData.default;\n  }\n});\nObject.defineProperty(exports, \"Path2D\", {\n  enumerable: true,\n  get: function get() {\n    return _Path2D.default;\n  }\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _reactNativeWebview = require(\"react-native-webview\");\n\nvar _Bus = _interopRequireDefault(require(\"./Bus\"));\n\nvar _webviewBinders = require(\"./webview-binders\");\n\nvar _CanvasRenderingContext2D = _interopRequireDefault(require(\"./CanvasRenderingContext2D\"));\n\nvar _indexHtml = _interopRequireDefault(require(\"./index.html.js\"));\n\nvar _Image = _interopRequireDefault(require(\"./Image\"));\n\nvar _ImageData = _interopRequireDefault(require(\"./ImageData\"));\n\nvar _Path2D = _interopRequireDefault(require(\"./Path2D\"));\n\nrequire(\"./CanvasGradient\");\n\nvar _dec,\n    _dec2,\n    _dec3,\n    _class,\n    _class2,\n    _temp,\n    _jsxFileName = \"src/Canvas.js\";\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if ((typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\") in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  _setPrototypeOf(subClass.prototype, superClass && superClass.prototype);\n\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) {\n    return o.__proto__;\n  };\n\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar stylesheet = _reactNative.StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    flex: 0\n  },\n  webview: {\n    overflow: 'hidden',\n    backgroundColor: 'transparent',\n    flex: 0\n  },\n  webviewAndroid9: {\n    overflow: 'hidden',\n    backgroundColor: 'transparent',\n    flex: 0,\n    opacity: 0.99\n  }\n});\n\nvar Canvas = (_dec = (0, _webviewBinders.webviewTarget)('canvas'), _dec2 = (0, _webviewBinders.webviewProperties)({\n  width: 300,\n  height: 150\n}), _dec3 = (0, _webviewBinders.webviewMethods)(['toDataURL']), _dec(_class = _dec2(_class = _dec3(_class = (_temp = _class2 = function (_Component) {\n  function Canvas() {\n    var _this;\n\n    _classCallCheck(this, Canvas);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Canvas).call(this));\n    _this.state = {\n      isLoaded: false\n    };\n\n    _this.addMessageListener = function (listener) {\n      _this.listeners.push(listener);\n\n      return function () {\n        return _this.removeMessageListener(listener);\n      };\n    };\n\n    _this.removeMessageListener = function (listener) {\n      _this.listeners.splice(_this.listeners.indexOf(listener), 1);\n    };\n\n    _this.webviewPostMessage = function (message) {\n      if (_this.webview) {\n        _this.webview.postMessage(JSON.stringify(message));\n      }\n    };\n\n    _this.bus = new _Bus.default(_this.webviewPostMessage);\n    _this.listeners = [];\n    _this.context2D = new _CanvasRenderingContext2D.default(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.getContext = function (contextType, contextAttributes) {\n      switch (contextType) {\n        case '2d':\n          {\n            return _this.context2D;\n          }\n      }\n\n      return null;\n    };\n\n    _this.postMessage = function _callee(message) {\n      var _ref, stack, _ref2, type, payload, error;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref = new Error(), stack = _ref.stack;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(_this.bus.post(_objectSpread({\n                id: Math.random()\n              }, message)));\n\n            case 3:\n              _ref2 = _context.sent;\n              type = _ref2.type;\n              payload = _ref2.payload;\n              _context.t0 = type;\n              _context.next = _context.t0 === 'error' ? 9 : _context.t0 === 'json' ? 12 : _context.t0 === 'blob' ? 13 : 14;\n              break;\n\n            case 9:\n              error = new Error(payload.message);\n              error.stack = stack;\n              throw error;\n\n            case 12:\n              return _context.abrupt(\"return\", payload);\n\n            case 13:\n              return _context.abrupt(\"return\", atob(payload));\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.handleMessage = function (e) {\n      var data = JSON.parse(e.nativeEvent.data);\n\n      switch (data.type) {\n        case 'log':\n          {\n            var _console;\n\n            (_console = console).log.apply(_console, _toConsumableArray(data.payload));\n\n            break;\n          }\n\n        case 'error':\n          {\n            throw new Error(data.payload.message);\n          }\n\n        default:\n          {\n            if (data.payload) {\n              var _constructor = _webviewBinders.constructors[data.meta.constructor];\n\n              if (_constructor) {\n                var _data = data,\n                    args = _data.args,\n                    payload = _data.payload;\n\n                var object = _constructor.constructLocally.apply(_constructor, [_assertThisInitialized(_assertThisInitialized(_this))].concat(_toConsumableArray(args)));\n\n                _extends(object, payload, _defineProperty({}, _webviewBinders.WEBVIEW_TARGET, data.meta.target));\n\n                data = _objectSpread({}, data, {\n                  payload: object\n                });\n              }\n\n              for (var _iterator = _this.listeners, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === \"function\" ? typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\" : \"@@iterator\"]();;) {\n                var _ref3;\n\n                if (_isArray) {\n                  if (_i >= _iterator.length) break;\n                  _ref3 = _iterator[_i++];\n                } else {\n                  _i = _iterator.next();\n                  if (_i.done) break;\n                  _ref3 = _i.value;\n                }\n\n                var _listener = _ref3;\n\n                _listener(data.payload);\n              }\n            }\n\n            _this.bus.handle(data);\n          }\n      }\n    };\n\n    _this.handleRef = function (element) {\n      _this.webview = element;\n    };\n\n    _this.handleLoad = function () {\n      _this.setState({\n        isLoaded: true\n      });\n\n      _this.bus.resume();\n    };\n\n    _this.bus.pause();\n\n    return _this;\n  }\n\n  _createClass(Canvas, [{\n    key: \"render\",\n    value: function render() {\n      var width = this.width,\n          height = this.height;\n      var _this$props = this.props,\n          style = _this$props.style,\n          _this$props$baseUrl = _this$props.baseUrl,\n          baseUrl = _this$props$baseUrl === void 0 ? '' : _this$props$baseUrl,\n          _this$props$originWhi = _this$props.originWhitelist,\n          originWhitelist = _this$props$originWhi === void 0 ? ['*'] : _this$props$originWhi;\n      var isLoaded = this.state.isLoaded;\n\n      if (_reactNative.Platform.OS === 'android') {\n        var isAndroid9 = _reactNative.Platform.Version >= 28;\n        return _react.default.createElement(_reactNative.View, {\n          style: [stylesheet.container, {\n            width: width,\n            height: height\n          }, style],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          }\n        }, _react.default.createElement(_reactNativeWebview.WebView, {\n          ref: this.handleRef,\n          style: [isAndroid9 ? stylesheet.webviewAndroid9 : stylesheet.webview, {\n            height: height,\n            width: width\n          }],\n          source: {\n            html: _indexHtml.default,\n            baseUrl: baseUrl\n          },\n          originWhitelist: originWhitelist,\n          onMessage: this.handleMessage,\n          onLoad: this.handleLoad,\n          mixedContentMode: \"always\",\n          scalesPageToFit: false,\n          javaScriptEnabled: true,\n          domStorageEnabled: true,\n          thirdPartyCookiesEnabled: true,\n          allowUniversalAccessFromFileURLs: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          }\n        }));\n      }\n\n      return _react.default.createElement(_reactNative.View, {\n        style: [stylesheet.container, {\n          width: width,\n          height: height,\n          opacity: isLoaded ? 1 : 0\n        }, style],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        }\n      }, _react.default.createElement(_reactNativeWebview.WebView, {\n        ref: this.handleRef,\n        style: [stylesheet.webview, {\n          height: height,\n          width: width\n        }],\n        source: {\n          html: _indexHtml.default,\n          baseUrl: baseUrl\n        },\n        originWhitelist: originWhitelist,\n        onMessage: this.handleMessage,\n        onLoad: this.handleLoad,\n        scrollEnabled: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        }\n      }));\n    }\n  }]);\n\n  _inherits(Canvas, _Component);\n\n  return Canvas;\n}(_react.Component), _class2.propTypes = {\n  style: _reactNative.ViewPropTypes.style,\n  baseUrl: _propTypes.default.string,\n  originWhitelist: _propTypes.default.arrayOf(_propTypes.default.string)\n}, _temp)) || _class) || _class) || _class);\nexports.default = Canvas;","map":{"version":3,"sources":["/Users/matteo/Projects/tests/NativeParticles/node_modules/react-native-canvas/dist/Canvas.js"],"names":["Object","defineProperty","exports","value","enumerable","get","_Image","default","_ImageData","_Path2D","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_reactNativeWebview","_Bus","_webviewBinders","_CanvasRenderingContext2D","_indexHtml","_dec","_dec2","_dec3","_class","_class2","_temp","_jsxFileName","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","set","_extends","assign","target","i","arguments","length","source","apply","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","toString","Array","from","isArray","arr2","_objectSpread","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","forEach","_defineProperty","configurable","writable","_classCallCheck","instance","Constructor","_inherits","subClass","superClass","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","getPrototypeOf","ReferenceError","stylesheet","_reactNative","StyleSheet","create","container","overflow","flex","webview","backgroundColor","webviewAndroid9","opacity","Canvas","webviewTarget","webviewProperties","width","height","webviewMethods","_Component","_this","state","isLoaded","addMessageListener","listener","listeners","push","removeMessageListener","splice","indexOf","webviewPostMessage","message","postMessage","JSON","stringify","bus","context2D","getContext","contextType","contextAttributes","_callee","_ref","stack","_ref2","type","payload","error","async","_callee$","_context","prev","next","Error","awrap","post","id","Math","random","sent","t0","abrupt","atob","stop","handleMessage","e","data","parse","nativeEvent","_console","console","log","_constructor","constructors","meta","constructor","_data","args","object","constructLocally","WEBVIEW_TARGET","_iterator","_isArray","_i","_ref3","done","_listener","handle","handleRef","element","handleLoad","setState","resume","pause","render","_this$props","style","_this$props$baseUrl","baseUrl","_this$props$originWhi","originWhitelist","Platform","OS","isAndroid9","Version","createElement","View","__source","fileName","lineNumber","WebView","ref","html","onMessage","onLoad","mixedContentMode","scalesPageToFit","javaScriptEnabled","domStorageEnabled","thirdPartyCookiesEnabled","allowUniversalAccessFromFileURLs","scrollEnabled","Component","propTypes","ViewPropTypes","string","arrayOf"],"mappings":"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","sourcesContent":["Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Image\", {\n  enumerable: true,\n  get: function get() {\n    return _Image.default;\n  }\n});\nObject.defineProperty(exports, \"ImageData\", {\n  enumerable: true,\n  get: function get() {\n    return _ImageData.default;\n  }\n});\nObject.defineProperty(exports, \"Path2D\", {\n  enumerable: true,\n  get: function get() {\n    return _Path2D.default;\n  }\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeWebview = require(\"react-native-webview\");\n\nvar _Bus = _interopRequireDefault(require(\"./Bus\"));\n\nvar _webviewBinders = require(\"./webview-binders\");\n\nvar _CanvasRenderingContext2D = _interopRequireDefault(require(\"./CanvasRenderingContext2D\"));\n\nvar _indexHtml = _interopRequireDefault(require(\"./index.html.js\"));\n\nvar _Image = _interopRequireDefault(require(\"./Image\"));\n\nvar _ImageData = _interopRequireDefault(require(\"./ImageData\"));\n\nvar _Path2D = _interopRequireDefault(require(\"./Path2D\"));\n\nrequire(\"./CanvasGradient\");\n\nvar _dec,\n    _dec2,\n    _dec3,\n    _class,\n    _class2,\n    _temp,\n    _jsxFileName = \"src/Canvas.js\";\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if ((typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\") in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nvar stylesheet = _reactNative.StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    flex: 0\n  },\n  webview: {\n    overflow: 'hidden',\n    backgroundColor: 'transparent',\n    flex: 0\n  },\n  webviewAndroid9: {\n    overflow: 'hidden',\n    backgroundColor: 'transparent',\n    flex: 0,\n    opacity: 0.99\n  }\n});\n\nvar Canvas = (_dec = (0, _webviewBinders.webviewTarget)('canvas'), _dec2 = (0, _webviewBinders.webviewProperties)({\n  width: 300,\n  height: 150\n}), _dec3 = (0, _webviewBinders.webviewMethods)(['toDataURL']), _dec(_class = _dec2(_class = _dec3(_class = (_temp = _class2 = function (_Component) {\n  function Canvas() {\n    var _this;\n\n    _classCallCheck(this, Canvas);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Canvas).call(this));\n    _this.state = {\n      isLoaded: false\n    };\n\n    _this.addMessageListener = function (listener) {\n      _this.listeners.push(listener);\n\n      return function () {\n        return _this.removeMessageListener(listener);\n      };\n    };\n\n    _this.removeMessageListener = function (listener) {\n      _this.listeners.splice(_this.listeners.indexOf(listener), 1);\n    };\n\n    _this.webviewPostMessage = function (message) {\n      if (_this.webview) {\n        _this.webview.postMessage(JSON.stringify(message));\n      }\n    };\n\n    _this.bus = new _Bus.default(_this.webviewPostMessage);\n    _this.listeners = [];\n    _this.context2D = new _CanvasRenderingContext2D.default(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.getContext = function (contextType, contextAttributes) {\n      switch (contextType) {\n        case '2d':\n          {\n            return _this.context2D;\n          }\n      }\n\n      return null;\n    };\n\n    _this.postMessage = function _callee(message) {\n      var _ref, stack, _ref2, type, payload, error;\n\n      return regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref = new Error(), stack = _ref.stack;\n              _context.next = 3;\n              return regeneratorRuntime.awrap(_this.bus.post(_objectSpread({\n                id: Math.random()\n              }, message)));\n\n            case 3:\n              _ref2 = _context.sent;\n              type = _ref2.type;\n              payload = _ref2.payload;\n              _context.t0 = type;\n              _context.next = _context.t0 === 'error' ? 9 : _context.t0 === 'json' ? 12 : _context.t0 === 'blob' ? 13 : 14;\n              break;\n\n            case 9:\n              error = new Error(payload.message);\n              error.stack = stack;\n              throw error;\n\n            case 12:\n              return _context.abrupt(\"return\", payload);\n\n            case 13:\n              return _context.abrupt(\"return\", atob(payload));\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    };\n\n    _this.handleMessage = function (e) {\n      var data = JSON.parse(e.nativeEvent.data);\n\n      switch (data.type) {\n        case 'log':\n          {\n            var _console;\n\n            (_console = console).log.apply(_console, _toConsumableArray(data.payload));\n\n            break;\n          }\n\n        case 'error':\n          {\n            throw new Error(data.payload.message);\n          }\n\n        default:\n          {\n            if (data.payload) {\n              var _constructor = _webviewBinders.constructors[data.meta.constructor];\n\n              if (_constructor) {\n                var _data = data,\n                    args = _data.args,\n                    payload = _data.payload;\n\n                var object = _constructor.constructLocally.apply(_constructor, [_assertThisInitialized(_assertThisInitialized(_this))].concat(_toConsumableArray(args)));\n\n                _extends(object, payload, _defineProperty({}, _webviewBinders.WEBVIEW_TARGET, data.meta.target));\n\n                data = _objectSpread({}, data, {\n                  payload: object\n                });\n              }\n\n              for (var _iterator = _this.listeners, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === \"function\" ? typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\" : \"@@iterator\"]();;) {\n                var _ref3;\n\n                if (_isArray) {\n                  if (_i >= _iterator.length) break;\n                  _ref3 = _iterator[_i++];\n                } else {\n                  _i = _iterator.next();\n                  if (_i.done) break;\n                  _ref3 = _i.value;\n                }\n\n                var _listener = _ref3;\n\n                _listener(data.payload);\n              }\n            }\n\n            _this.bus.handle(data);\n          }\n      }\n    };\n\n    _this.handleRef = function (element) {\n      _this.webview = element;\n    };\n\n    _this.handleLoad = function () {\n      _this.setState({\n        isLoaded: true\n      });\n\n      _this.bus.resume();\n    };\n\n    _this.bus.pause();\n\n    return _this;\n  }\n\n  _createClass(Canvas, [{\n    key: \"render\",\n    value: function render() {\n      var width = this.width,\n          height = this.height;\n      var _this$props = this.props,\n          style = _this$props.style,\n          _this$props$baseUrl = _this$props.baseUrl,\n          baseUrl = _this$props$baseUrl === void 0 ? '' : _this$props$baseUrl,\n          _this$props$originWhi = _this$props.originWhitelist,\n          originWhitelist = _this$props$originWhi === void 0 ? ['*'] : _this$props$originWhi;\n      var isLoaded = this.state.isLoaded;\n\n      if (_reactNative.Platform.OS === 'android') {\n        var isAndroid9 = _reactNative.Platform.Version >= 28;\n        return _react.default.createElement(_reactNative.View, {\n          style: [stylesheet.container, {\n            width: width,\n            height: height\n          }, style],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          }\n        }, _react.default.createElement(_reactNativeWebview.WebView, {\n          ref: this.handleRef,\n          style: [isAndroid9 ? stylesheet.webviewAndroid9 : stylesheet.webview, {\n            height: height,\n            width: width\n          }],\n          source: {\n            html: _indexHtml.default,\n            baseUrl: baseUrl\n          },\n          originWhitelist: originWhitelist,\n          onMessage: this.handleMessage,\n          onLoad: this.handleLoad,\n          mixedContentMode: \"always\",\n          scalesPageToFit: false,\n          javaScriptEnabled: true,\n          domStorageEnabled: true,\n          thirdPartyCookiesEnabled: true,\n          allowUniversalAccessFromFileURLs: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          }\n        }));\n      }\n\n      return _react.default.createElement(_reactNative.View, {\n        style: [stylesheet.container, {\n          width: width,\n          height: height,\n          opacity: isLoaded ? 1 : 0\n        }, style],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        }\n      }, _react.default.createElement(_reactNativeWebview.WebView, {\n        ref: this.handleRef,\n        style: [stylesheet.webview, {\n          height: height,\n          width: width\n        }],\n        source: {\n          html: _indexHtml.default,\n          baseUrl: baseUrl\n        },\n        originWhitelist: originWhitelist,\n        onMessage: this.handleMessage,\n        onLoad: this.handleLoad,\n        scrollEnabled: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        }\n      }));\n    }\n  }]);\n\n  _inherits(Canvas, _Component);\n\n  return Canvas;\n}(_react.Component), _class2.propTypes = {\n  style: _reactNative.ViewPropTypes.style,\n  baseUrl: _propTypes.default.string,\n  originWhitelist: _propTypes.default.arrayOf(_propTypes.default.string)\n}, _temp)) || _class) || _class) || _class);\nexports.default = Canvas;"]},"metadata":{},"sourceType":"script"}