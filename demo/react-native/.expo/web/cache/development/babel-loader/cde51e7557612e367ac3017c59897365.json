{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar Bus = function () {\n  function Bus(send) {\n    _classCallCheck(this, Bus);\n\n    this._paused = false;\n    this._messageListeners = {};\n    this._queue = [];\n    this._send = send;\n  }\n\n  _createClass(Bus, [{\n    key: \"post\",\n    value: function post(message) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this._messageListeners[message.id] = resolve;\n\n        if (!_this._paused) {\n          _this._send(message);\n        } else {\n          _this._queue.push(message);\n        }\n      });\n    }\n  }, {\n    key: \"handle\",\n    value: function handle(message) {\n      var handler = this._messageListeners[message.id];\n\n      if (handler) {\n        handler(message);\n      } else {\n        console.warn('Received unexpected message', message);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this._paused = true;\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this._paused = false;\n\n      this._send(this._queue);\n\n      this._queue = [];\n    }\n  }]);\n\n  return Bus;\n}();\n\nexports.default = Bus;","map":{"version":3,"sources":["/Users/matteo/Projects/tests/NativeParticles/node_modules/react-native-canvas/dist/Bus.js"],"names":["Object","defineProperty","exports","value","default","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","Bus","send","_paused","_messageListeners","_queue","_send","post","message","_this","Promise","resolve","id","push","handle","handler","console","warn","pause","resume"],"mappings":"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","sourcesContent":["Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Bus = function () {\n  function Bus(send) {\n    _classCallCheck(this, Bus);\n\n    this._paused = false;\n    this._messageListeners = {};\n    this._queue = [];\n    this._send = send;\n  }\n\n  _createClass(Bus, [{\n    key: \"post\",\n    value: function post(message) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this._messageListeners[message.id] = resolve;\n\n        if (!_this._paused) {\n          _this._send(message);\n        } else {\n          _this._queue.push(message);\n        }\n      });\n    }\n  }, {\n    key: \"handle\",\n    value: function handle(message) {\n      var handler = this._messageListeners[message.id];\n\n      if (handler) {\n        handler(message);\n      } else {\n        console.warn('Received unexpected message', message);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this._paused = true;\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this._paused = false;\n\n      this._send(this._queue);\n\n      this._queue = [];\n    }\n  }]);\n\n  return Bus;\n}();\n\nexports.default = Bus;"]},"metadata":{},"sourceType":"script"}