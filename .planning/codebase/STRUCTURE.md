# Codebase Structure

**Analysis Date:** 2026-03-01

## Directory Layout (high level)

```
[project-root]/
├── engine/                  # Core runtime and utilities (`engine/src/*`)
├── bundles/                 # Distribution bundles (basic, slim, full)
│   ├── basic/
│   │   ├── src/
│   │   │   └── bundle.ts
│   ├── slim/
│   │   ├── src/
│   │   │   └── bundle.ts
│   └── full/
├── shapes/                  # Shape packages (e.g. `rounded-polygon`)
├── updaters/                # Updater packages (e.g. `tilt`)
├── plugins/                 # Plugin packages (e.g. `themes`)
├── utils/                   # Shared utilities (e.g. `perlinNoise`)
├── .github/                 # CI, workflows and automation
├── docs/                    # Generated docs (typedoc output)
├── package.json             # Workspace script orchestrator
├── pnpm-workspace.yaml      # Monorepo packages
└── tsconfig.json            # Root TypeScript configuration
```

## Directory Purposes and Key Files

**`engine/`**

- Purpose: core particle runtime and shared helpers.
- Contains: `engine/src/index.ts`, `engine/src/exports.ts`, `engine/src/Utils/*`, `engine/src/Enums/*`.

**`bundles/*/`**

- Purpose: assemble packages into user-facing bundles.
- Key files: `bundles/*/src/bundle.ts`, `bundles/*/src/index.ts`, `bundles/*/package.json`, `bundles/*/webpack.config.js`, `bundles/*/tsconfig.browser.json`.

**`shapes/*/`, `updaters/*/`, `plugins/*/`, `utils/*/`**

- Purpose: self-contained feature packages with their own package metadata and `src/` code. Example: `shapes/rounded-polygon/src/RoundedPolygonDrawer.ts`.

**`package.json` (root)**

- Purpose: workspace orchestration scripts, devDependencies and tools (nx, lerna, typedoc, vitest). See `package.json` for scripts used to build and publish.

**Monorepo config**

- `pnpm-workspace.yaml` lists workspaces. `nx.json` configures Nx tasks and project graph.

## Tests and Tooling

- Test runner: `vitest` (dependency in `package.json`). Test files are colocated inside packages where present (search `*.test.*` or `*.spec.*` within a package). Not all packages include tests in this snapshot.
- Linting and formatting: `@tsparticles/eslint-config`, `prettier` configured via `package.json` and per-package `eslint.config.js` (e.g. `bundles/slim/eslint.config.js`).

## Build Artifacts

- Bundles: built by package-specific `webpack.config.js` found under `bundles/*/webpack.config.js`.
- Documentation: generated by `typedoc` into `docs/` via `package.json` `build:docs` script.

## Naming Conventions

- Packages: kebab-case directories (e.g. `rounded-polygon`, `perlinNoise`).
- Source folders: `src/` with `index.ts` entry files (e.g. `updaters/tilt/src/index.ts`).
- Files and classes: PascalCase for classes and components (`TiltUpdater.ts`, `RoundedPolygonDrawer.ts`), camelCase for functions and variables.

## Where to add code

- New runtime feature: add a top-level package under the appropriate category (`shapes/`, `updaters/`, `plugins/`, `utils/`) with `src/index.ts` and implementation files under `src/`.
- To include in published bundle: add registration in `bundles/*/src/bundle.ts` and update `bundles/*/package.dist.json` if necessary.

## Important files to know

- `engine/src/index.ts` - core runtime bootstrap.
- `engine/src/exports.ts` - public export surface for the engine.
- `bundles/*/src/bundle.ts` - feature assembly into bundles.
- `bundles/*/webpack.config.js` - bundle build config.
- `package.json` - workspace orchestration and scripts.

_Structure analysis: 2026-03-01_
